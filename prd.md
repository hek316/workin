# ì›Œí¬ì¸(WorkIn) MVP ì œí’ˆ ìš”êµ¬ì‚¬í•­ ëª…ì„¸ì„œ (PRD)

**ë¬¸ì„œ ë²„ì „:** v1.1  
**ì‘ì„±ì¼:** 2025ë…„ 11ì›” 14ì¼  
**ì‘ì„±ì:** Product Manager  
**ëŒ€ìƒ:** ê°œë°œíŒ€, ë””ìì¸íŒ€, QAíŒ€  
**í”„ë¡œì íŠ¸ ì½”ë“œëª…:** WorkIn MVP

---

## 1. ë°°ê²½ ë° ë¬¸ì œ ì •ì˜

### 1.1 í˜„ì¬ ë¬¸ì œ ìƒí™©
Acompany íšŒì‚¬ëŠ” í˜„ì¬ **ìˆ˜ê¸°ë¡œ ì¶œí‡´ê·¼ ê¸°ë¡**ì„ ê´€ë¦¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤:

- **ì§ì›**: ë§¤ì¼ ìˆ˜ê¸° ì‘ì„±ì˜ ë²ˆê±°ë¡œì›€, ì‘ì„± ëˆ„ë½ ì‹œ ê¸‰ì—¬ ê³„ì‚° ì˜¤ë¥˜ ë°œìƒ
- **ê´€ë¦¬ì**: 30ëª…ì˜ ì¶œí‡´ê·¼ ê¸°ë¡ì„ ì¼ì¼ì´ í™•ì¸í•˜ê³  ì§‘ê³„í•˜ëŠ” ë° ì›” 20ì‹œê°„ ì´ìƒ ì†Œìš”
- **íšŒì‚¬**: ë¶€ì •í™•í•œ ê·¼íƒœ ë°ì´í„°ë¡œ ì¸í•œ ê¸‰ì—¬ ë¶„ìŸ ë° ë…¸ë¬´ ë¦¬ìŠ¤í¬

### 1.2 ì†”ë£¨ì…˜
**ì›Œí¬ì¸**ì€ GPS ê¸°ë°˜ ìë™í™”ëœ ì¶œí‡´ê·¼ ê¸°ë¡ ì‹œìŠ¤í…œìœ¼ë¡œ, ë²„íŠ¼ í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ì •í™•í•œ ê·¼íƒœ ê´€ë¦¬ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤.

### 1.3 ì™œ ì§€ê¸ˆì¸ê°€?
- ì¤‘ì†Œê¸°ì—… ê·¼íƒœê´€ë¦¬ ì‹œì¥ì˜ ë””ì§€í„¸ ì „í™˜ ê°€ì†í™”
- ê¸°ì¡´ ì†”ë£¨ì…˜(í•˜ì´ì›ìŠ¤ ë“±)ì˜ ë†’ì€ ì§„ì…ì¥ë²½ (ë³µì¡ì„±, ë¹„ìš©)
- PWA ê¸°ìˆ ì˜ ì„±ìˆ™ìœ¼ë¡œ ì•± ì„¤ì¹˜ ì—†ì´ ë„¤ì´í‹°ë¸Œ ì•± ìˆ˜ì¤€ì˜ ê²½í—˜ ì œê³µ ê°€ëŠ¥

---

## 2. íƒ€ê²Ÿ ìœ ì € ë° í˜ë¥´ì†Œë‚˜

### 2.1 Primary Persona: ì§ì› ë¯¼ì§€
```
ì´ë¦„: ê¹€ë¯¼ì§€ (27ì„¸)
ì§ì±…: ë§ˆì¼€íŒ… íŒ€ì›
ê·¼ë¬´ í™˜ê²½: ì£¼ 5ì¼ ì¶œê·¼ (ì›”-ê¸ˆ), ê°€ë” ì™¸ê·¼
ê¸°ìˆ  ìˆ˜ì¤€: ìŠ¤ë§ˆíŠ¸í° ì•± ì‚¬ìš©ì— ìµìˆ™í•œ Zì„¸ëŒ€

Pain Points:
- "ë§¤ì¼ ì•„ì¹¨ ìˆ˜ê¸° ì‘ì„± ê¹œë¹¡í•˜ë©´ ì›”ë§ì— ì¼ì¼ì´ ë³µêµ¬í•´ì•¼ í•´ìš”"
- "ì™¸ê·¼ ê°”ì„ ë•Œ ì¶œí‡´ê·¼ ì–´ë–»ê²Œ ì²˜ë¦¬í•˜ëŠ”ì§€ ë§¤ë²ˆ í—·ê°ˆë ¤ìš”"
- "GPS ìœ„ì¹˜ ì¶”ì ë‹¹í•˜ëŠ” ê±´ ì•„ë‹ˆê² ì£ ? ê°œì¸ì •ë³´ ê±±ì •ë¼ìš”"

Goals:
- 10ì´ˆ ì•ˆì— ì¶œí‡´ê·¼ ê¸°ë¡ ì™„ë£Œ
- ì–¸ì œë“  ë‚´ ê¸°ë¡ í™•ì¸ ê°€ëŠ¥
- ê°œì¸ì •ë³´ ê±±ì • ì—†ì´ ì‚¬ìš©
```

### 2.2 Secondary Persona: ê´€ë¦¬ì ìˆ˜í˜„
```
ì´ë¦„: ë°•ìˆ˜í˜„ (35ì„¸)
ì§ì±…: ì¸ì‚¬íŒ€ ë¦¬ë”
ê´€ë¦¬ ì§ì› ìˆ˜: 30ëª…
ê¸°ìˆ  ìˆ˜ì¤€: ê¸°ë³¸ì ì¸ ì—‘ì…€, ì›¹ ì‚¬ìš© ê°€ëŠ¥

Pain Points:
- "ë§¤ì¼ 30ëª…ì˜ ì¶œí‡´ê·¼ í™•ì¸í•˜ëŠ”ë° 1ì‹œê°„ì”© ê±¸ë ¤ìš”"
- "ëˆ„ê°€ ì§€ê°í–ˆëŠ”ì§€ ì¼ì¼ì´ ê³„ì‚°í•˜ê³  í‘œì‹œí•´ì•¼ í•´ìš”"
- "ì›”ë§ ê¸‰ì—¬ ê³„ì‚° ì‹œ ë°ì´í„° ì •ë¦¬ì— í•˜ë£¨ ì¢…ì¼ ê±¸ë ¤ìš”"

Goals:
- ì‹¤ì‹œê°„ìœ¼ë¡œ ì „ì²´ ì§ì› ì¶œí‡´ê·¼ í˜„í™© í•œëˆˆì— íŒŒì•…
- í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ì—‘ì…€ ë‹¤ìš´ë¡œë“œ
- ë³µì¡í•œ ê¸°ìˆ  ì§€ì‹ ì—†ì´ ì§ê´€ì ìœ¼ë¡œ ì‚¬ìš©
```

---

## 3. ì œí’ˆ ëª©í‘œ ë° ì„±ê³µ ì§€í‘œ

### 3.1 ì œí’ˆ ëª©í‘œ
**Primary Goal:** Acompany ì§ì›ë“¤ì˜ ìˆ˜ê¸° ì¶œí‡´ê·¼ ê¸°ë¡ì„ 100% ë””ì§€í„¸ ìë™í™”ë¡œ ì „í™˜

**Secondary Goals:**
- ê´€ë¦¬ìì˜ ê·¼íƒœ ê´€ë¦¬ ì‹œê°„ 90% ë‹¨ì¶• (ì›” 20ì‹œê°„ â†’ 2ì‹œê°„)
- MVP ê²€ì¦ í›„ íƒ€ ì¤‘ì†Œê¸°ì—… í™•ì¥ ì¤€ë¹„

---

## 4. MVP ë²”ìœ„ ë° ìš°ì„ ìˆœìœ„

### 4.1 MVPì— í¬í•¨ë˜ëŠ” ê¸°ëŠ¥ (In Scope)
âœ… ì§ì›ìš© ì¶œí‡´ê·¼ ê¸°ë¡ (GPS ê¸°ë°˜)
âœ… ì§ì›ìš© ì¶œí‡´ê·¼ ê¸°ë¡ ì¡°íšŒ (ë‹¹ì›” + ê³¼ê±° 3ê°œì›”)
âœ… ê´€ë¦¬ììš© ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ
âœ… ê´€ë¦¬ììš© ì—‘ì…€ ë‹¤ìš´ë¡œë“œ
âœ… ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸
âœ… ì¹´ì¹´ì˜¤ ê°„í¸ ë¡œê·¸ì¸
âœ… GPS ë²”ìœ„ ì™¸ ì˜ˆì™¸ ìš”ì²­/ìŠ¹ì¸ ì‹œìŠ¤í…œ  

### 4.2 MVPì— í¬í•¨ë˜ì§€ ì•ŠëŠ” ê¸°ëŠ¥ (Out of Scope)
âŒ ëª¨ë°”ì¼ ë„¤ì´í‹°ë¸Œ ì•± (PWAë§Œ ì œê³µ)  
âŒ ë‹¤ì¤‘ ì‚¬ì—…ì¥ ê´€ë¦¬  
âŒ ë³µì¡í•œ ê·¼ë¬´ í˜•íƒœ (3êµëŒ€, ì‹œì°¨ ì¶œí‡´ê·¼ ë“±)  
âŒ ê¸‰ì—¬ ê³„ì‚° ì—°ë™  
âŒ íœ´ê°€/ì—°ì°¨ ê´€ë¦¬  
âŒ ì•Œë¦¼í†¡/ë¬¸ì ë°œì†¡  

---

## 5. ê¸°ìˆ  ìŠ¤íƒ (Tech Stack)

### 5.1 Frontend
| ê¸°ìˆ  | ë²„ì „ | ì„ íƒ ì´ìœ  |
|------|------|-----------|
| **Next.js** | 14 (App Router) | PWA ì„¤ì • ê°„ë‹¨, SSRë¡œ ì´ˆê¸° ë¡œë”© ë¹ ë¦„ |
| **TypeScript** | 5.x | íƒ€ì… ì•ˆì •ì„±, ì½”ë“œ ê°€ë…ì„± í–¥ìƒ |
| **Tailwind CSS** | 3.x | ë¹ ë¥¸ UI ê°œë°œ, ë°˜ì‘í˜• ë””ìì¸ |
| **Zustand** | 4.x | ê°€ë²¼ìš´ ìƒíƒœê´€ë¦¬ |

### 5.2 Backend & Database
| ê¸°ìˆ  | ì„ íƒ ì´ìœ  |
|------|-----------|
| **Firebase Auth** | ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸, ì„¸ì…˜ ê´€ë¦¬ ìë™í™” |
| **Kakao SDK** | ì¹´ì¹´ì˜¤ ê°„í¸ ë¡œê·¸ì¸ (í•œêµ­ ì‚¬ìš©ì 95% ë³´ìœ ) |
| **Firestore** | ì‹¤ì‹œê°„ ë™ê¸°í™”, ì˜¤í”„ë¼ì¸ ìºì‹±, NoSQLë¡œ ë¹ ë¥¸ ê°œë°œ |
| **Cloud Functions** | ì„œë²„ë¦¬ìŠ¤ ë°±ì—”ë“œ ë¡œì§ (ì—‘ì…€ ìƒì„±, ë°±ì—…, GPS ê²€ì¦) |
| **Cloud Storage** | ì—‘ì…€ íŒŒì¼ ë° ë°±ì—… ë°ì´í„° ì €ì¥ |

### 5.3 Infrastructure
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **ECS Fargate** | Next.js í”„ë¡ íŠ¸ì—”ë“œ ì»¨í…Œì´ë„ˆ ë°°í¬ |
| **ALB** | ë¡œë“œ ë°¸ëŸ°ì„œ, HTTPS |
| **ECR** | ë„ì»¤ ì´ë¯¸ì§€ ì €ì¥ì†Œ |
| **CloudFront** | CDN (ì„ íƒì‚¬í•­, ì„±ëŠ¥ ìµœì í™”) |

### 5.4 DevOps
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **Terraform** | ECS/ALB/VPC ì¸í”„ë¼ ì½”ë“œí™” |
| **GitHub Actions** | CI/CD (ë¹Œë“œ â†’ ECR í‘¸ì‹œ â†’ ECS ë°°í¬) |
| **Docker** | ì»¨í…Œì´ë„ˆí™” |

### 5.5 Monitoring & Logging
| ê¸°ìˆ  | ìš©ë„ |
|------|------|
| **CloudWatch** | ECS ì»¨í…Œì´ë„ˆ ë¡œê·¸, CPU/ë©”ëª¨ë¦¬ ëª¨ë‹ˆí„°ë§ |
| **Sentry** | í”„ë¡ íŠ¸ì—”ë“œ ì—ëŸ¬ íŠ¸ë˜í‚¹, ì‹¤ì‹œê°„ ì•Œë¦¼ |
| **Firebase Console** | Firestore ì‚¬ìš©ëŸ‰, Cloud Functions ì„±ëŠ¥ |

### 5.6 ì™œ Firestore + ECS í•˜ì´ë¸Œë¦¬ë“œì¸ê°€?
- âœ… **ì‹¤ì‹œê°„ ë™ê¸°í™”**: ì§ì› ì¶œê·¼ â†’ ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì¦‰ì‹œ ê°±ì‹  (WebSocket ë¶ˆí•„ìš”)
- âœ… **ì˜¤í”„ë¼ì¸ ì§€ì›**: ì§€í•˜ì² ì—ì„œë„ ì¶œí‡´ê·¼ ê¸°ë¡ ê°€ëŠ¥ (ë‚˜ì¤‘ì— ìë™ ë™ê¸°í™”)
- âœ… **ë¹ ë¥¸ MVP**: REST API ë ˆì´ì–´ ë¶ˆí•„ìš”, Firestore SDKë¡œ ì§ì ‘ ì ‘ê·¼
- âœ… **ë¬´ë£Œ í‹°ì–´**: 30ëª… ê·œëª¨ëŠ” Firebase ë¬´ë£Œ (ì½ê¸° 50,000/ì¼, ì“°ê¸° 20,000/ì¼)
- âœ… **ECS í™œìš©**: Next.jsëŠ” ECSë¡œ ë°°í¬í•´ ì¸í”„ë¼ ì œì–´ê¶Œ ìœ ì§€

---

## 6. ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (Firestore Collections)

### 6.1 \`users\` ì»¬ë ‰ì…˜
**ìš©ë„:** ì§ì› ë° ê´€ë¦¬ì ì •ë³´ ì €ì¥

\`\`\`typescript
// ë¬¸ì„œ ID: Firebase Auth UID
{
  uid: string;                    // Firebase Auth UID
  email: string;                  // minjik@acompany.com or "kakao_{kakao_id}@walkin.com"
  name: string;                   // "ê¹€ë¯¼ì§€"
  kakaoId?: string;               // ì¹´ì¹´ì˜¤ ê³ ìœ  ID (ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œ)
  profileImage?: string;          // ì¹´ì¹´ì˜¤ í”„ë¡œí•„ ì´ë¯¸ì§€ (ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹œ)
  role: "employee" | "admin";     // ì—­í• 
  createdAt: Timestamp;           // ê³„ì • ìƒì„±ì¼
  lastLoginAt: Timestamp;         // ë§ˆì§€ë§‰ ë¡œê·¸ì¸
}
\`\`\`

**ì¸ë±ìŠ¤:**
- \`email\` (unique) - ë¡œê·¸ì¸ ì¡°íšŒ
- \`role\` - ê´€ë¦¬ì/ì§ì› í•„í„°ë§

---

### 6.2 \`attendance\` ì»¬ë ‰ì…˜
**ìš©ë„:** ì¶œí‡´ê·¼ ê¸°ë¡ ì €ì¥

\`\`\`typescript
// ë¬¸ì„œ ID: {uid}_{YYYY-MM-DD} (ì˜ˆ: abc123_2025-11-14)
{
  uid: string;                    // ì§ì› UID
  name: string;                   // "ê¹€ë¯¼ì§€" (ì¡°íšŒ ì„±ëŠ¥ í–¥ìƒ)
  date: string;                   // "2025-11-14"

  checkIn: {
    time: Timestamp;              // 2025-11-14T09:05:00
    location: {
      lat: number;                // 37.5665
      lng: number;                // 126.9780
      accuracy: number;           // 15 (ë¯¸í„°)
    };
    status: "normal" | "late" | "approved" | "pending";
  } | null;

  checkOut: {
    time: Timestamp;              // 2025-11-14T18:30:00
    location: {
      lat: number;
      lng: number;
      accuracy: number;
    };
    status: "normal" | "early" | "approved";
  } | null;

  workHours: number | null;       // 8.42 (ì‹œê°„ ë‹¨ìœ„)
  createdAt: Timestamp;
  updatedAt: Timestamp;
}
\`\`\`

**ì¸ë±ìŠ¤:**
- \`uid + date\` (composite) - íŠ¹ì • ì§ì›ì˜ íŠ¹ì • ë‚ ì§œ ì¡°íšŒ
- \`date\` - ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì¼ì¼ ì¡°íšŒ
- \`checkIn.status\` - ì§€ê°ì í•„í„°ë§

---

### 6.3 \`approvals\` ì»¬ë ‰ì…˜
**ìš©ë„:** GPS ë²”ìœ„ ì™¸ ì˜ˆì™¸ ìŠ¹ì¸ ìš”ì²­

\`\`\`typescript
// ë¬¸ì„œ ID: ìë™ ìƒì„±
{
  uid: string;                    // ìš”ì²­ ì§ì› UID
  name: string;                   // "ê¹€ë¯¼ì§€"
  type: "checkIn" | "checkOut";   // ì¶œê·¼/í‡´ê·¼ êµ¬ë¶„
  requestedAt: Timestamp;         // ìš”ì²­ ì‹œê°
  reason: string;                 // "ì™¸ê·¼ìœ¼ë¡œ ì¸í•œ ì¶œê·¼ ìš”ì²­"
  location: {
    lat: number;
    lng: number;
    accuracy: number;
  };
  status: "pending" | "approved" | "rejected";
  reviewedBy: string | null;      // ìŠ¹ì¸/ê±°ë¶€í•œ ê´€ë¦¬ì UID
  reviewedAt: Timestamp | null;
  rejectionReason: string | null; // ê±°ë¶€ ì‚¬ìœ 
}
\`\`\`

**ì¸ë±ìŠ¤:**
- \`status + requestedAt\` (composite) - ëŒ€ê¸° ì¤‘ ìš”ì²­ ì •ë ¬ ì¡°íšŒ

---

### 6.4 \`settings\` ì»¬ë ‰ì…˜
**ìš©ë„:** íšŒì‚¬ ì„¤ì • (GPS ë°˜ê²½, ê·¼ë¬´ ì‹œê°„ ë“±)

\`\`\`typescript
// ë¬¸ì„œ ID: "company_config"
{
  companyName: string;            // "Acompany"
  officeLocation: {
    lat: number;                  // 37.5665
    lng: number;                  // 126.9780
  };
  checkInRadius: number;          // 1000 (ë¯¸í„°)
  checkOutRadius: number;         // 3000 (ë¯¸í„°)
  workStartTime: string;          // "09:00"
  lateThreshold: number;          // 5 (ë¶„) - 09:05 ì´í›„ ì§€ê°
  updatedAt: Timestamp;
}
\`\`\`

---

## 7. ê°œë°œ ìš°ì„ ìˆœìœ„ ë° ì¼ì • (Development Phases)

### Phase 1: ì¸í”„ë¼ + í•µì‹¬ ê¸°ëŠ¥ (2ì£¼)
| ì‘ì—… | ë‹´ë‹¹ | ì˜ˆìƒ ì‹œê°„ |
|------|------|-----------|
| Terraform ì¸í”„ë¼ êµ¬ì„± (VPC, ECS, ALB) | DevOps | 8h |
| Next.js í”„ë¡œì íŠ¸ ì´ˆê¸° ì„¤ì • + Firebase ì—°ë™ | Frontend | 4h |
| Docker ì»¨í…Œì´ë„ˆí™” (Next.js) | DevOps | 4h |
| GitHub Actions CI/CD íŒŒì´í”„ë¼ì¸ | DevOps | 6h |
| Firebase Auth ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸ êµ¬í˜„ | Frontend | 4h |
| ì¹´ì¹´ì˜¤ SDK ì—°ë™ + ê°„í¸ ë¡œê·¸ì¸ êµ¬í˜„ | Frontend | 6h |
| Firestore ì»¬ë ‰ì…˜ ì„¤ê³„ ë° ë³´ì•ˆ ê·œì¹™ | Backend | 4h |
| GPS ìœ„ì¹˜ ê¶Œí•œ + ì¶œí‡´ê·¼ ê¸°ë¡ UI | Frontend | 10h |
| PWA ì„¤ì • (manifest.json, Service Worker) | Frontend | 4h |

**ğŸ¯ Phase 1 ì™„ë£Œ ê¸°ì¤€:**
- âœ… ECSì— ë°°í¬ëœ Next.js ì•± ì ‘ì† ê°€ëŠ¥
- âœ… ì¹´ì¹´ì˜¤ ê°„í¸ ë¡œê·¸ì¸ ì‘ë™
- âœ… ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ë¡œê·¸ì¸ ì‘ë™ (ë°±ì—…ìš©)
- âœ… ì¶œí‡´ê·¼ ê¸°ë¡ Firestore ì €ì¥
- âœ… PWAë¡œ ëª¨ë°”ì¼ í™ˆ í™”ë©´ ì¶”ê°€ ê°€ëŠ¥

---

### Phase 2: ì¡°íšŒ + ê´€ë¦¬ì ê¸°ëŠ¥ (2ì£¼)
| ì‘ì—… | ë‹´ë‹¹ | ì˜ˆìƒ ì‹œê°„ |
|------|------|-----------|
| ì§ì›ìš© ìº˜ë¦°ë” ì¡°íšŒ UI | Frontend | 8h |
| ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ì‹¤ì‹œê°„ ë¦¬ìŠ¤ë„ˆ | Frontend | 10h |
| ì§€ê°/ì¡°í‡´ ìë™ ê³„ì‚° Cloud Function | Backend | 6h |
| ì—‘ì…€ ë‹¤ìš´ë¡œë“œ Cloud Function | Backend | 8h |
| Firestore ë³´ì•ˆ ê·œì¹™ ê°•í™” | Backend | 4h |

**ğŸ¯ Phase 2 ì™„ë£Œ ê¸°ì¤€:**
- âœ… ì§ì› 3ê°œì›” ê¸°ë¡ ì¡°íšŒ
- âœ… ê´€ë¦¬ì ì‹¤ì‹œê°„ í˜„í™© í™•ì¸
- âœ… ì—‘ì…€ ë‹¤ìš´ë¡œë“œ ì‘ë™

---

### Phase 3: ì˜ˆì™¸ ì²˜ë¦¬ + ìµœì í™” (1ì£¼)
| ì‘ì—… | ë‹´ë‹¹ | ì˜ˆìƒ ì‹œê°„ |
|------|------|-----------|
| GPS ë²”ìœ„ ì™¸ ì˜ˆì™¸ ìš”ì²­/ìŠ¹ì¸ UI | Frontend | 8h |
| Firestore ìë™ ë°±ì—… (Cloud Scheduler) | Backend | 4h |
| Sentry ì—ëŸ¬ íŠ¸ë˜í‚¹ ì„¤ì • | DevOps | 3h |
| CloudWatch ì•ŒëŒ ì„¤ì • | DevOps | 3h |

**ğŸ¯ Phase 3 ì™„ë£Œ ê¸°ì¤€:**
- âœ… ì˜ˆì™¸ ìŠ¹ì¸ í”Œë¡œìš° ì‘ë™
- âœ… ì¼ì¼ ìë™ ë°±ì—…
- âœ… ì—ëŸ¬ íŠ¸ë˜í‚¹ í™œì„±í™”

---

### ì „ì²´ ì¼ì •: 5ì£¼

---

## 8. Terraform ì¸í”„ë¼ êµ¬ì„± ê°œìš”

### 8.1 í•„ìš”í•œ ë¦¬ì†ŒìŠ¤
\`\`\`
VPC
â”œâ”€â”€ Public Subnets (2ê°œ AZ)
â”œâ”€â”€ Private Subnets (2ê°œ AZ)
â”œâ”€â”€ Internet Gateway
â”œâ”€â”€ NAT Gateway
â””â”€â”€ Route Tables

ECS Cluster
â””â”€â”€ Frontend Service (Fargate)
    â””â”€â”€ Task Definition (Next.js ì»¨í…Œì´ë„ˆ)

ALB (Application Load Balancer)
â””â”€â”€ Target Group: Frontend (í¬íŠ¸ 3000)

ECR (Elastic Container Registry)
â””â”€â”€ walkin-frontend ë ˆí¬ì§€í† ë¦¬

CloudWatch
â””â”€â”€ ECS Logs (/aws/ecs/walkin-frontend)
\`\`\`

### 8.2 ëª¨ë‹ˆí„°ë§ ì„¤ì •

#### CloudWatch
- **ECS ì»¨í…Œì´ë„ˆ ë¡œê·¸**: `/aws/ecs/walkin-frontend`
- **ë©”íŠ¸ë¦­ ì•ŒëŒ**:
  - ECS CPU > 80% (5ë¶„ ì—°ì†)
  - ALB 5xx ì—ëŸ¬ > 10ê°œ/ë¶„
  - ECS íƒœìŠ¤í¬ 0ê°œ (ì„œë¹„ìŠ¤ ë‹¤ìš´)

#### Sentry
- **Frontend**: Next.js SDK - í˜ì´ì§€ ë¡œë“œ ì—ëŸ¬, Firestore í˜¸ì¶œ ì‹¤íŒ¨
- **ì•Œë¦¼**: Slack ì—°ë™, ì—ëŸ¬ìœ¨ 5% ì´ˆê³¼ ì‹œ ì¦‰ì‹œ ì•Œë¦¼

#### Firebase Console
- Firestore ì½ê¸°/ì“°ê¸° ì‚¬ìš©ëŸ‰
- Cloud Functions ì‹¤í–‰ ì‹œê°„
- Auth í™œì„± ì‚¬ìš©ì ìˆ˜

---

### 8.3 í™˜ê²½ ë³€ìˆ˜
\`\`\`
# Next.js (.env.local)

# Firebase ì„¤ì •
NEXT_PUBLIC_FIREBASE_API_KEY=xxx
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=walkin.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=walkin
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=walkin.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=xxx
NEXT_PUBLIC_FIREBASE_APP_ID=xxx

# Kakao ì„¤ì •
NEXT_PUBLIC_KAKAO_APP_KEY=xxx
NEXT_PUBLIC_KAKAO_REDIRECT_URI=https://walkin.com/auth/kakao/callback

# Sentry
NEXT_PUBLIC_SENTRY_DSN=https://xxx@sentry.io/xxx

# íšŒì‚¬ ì„¤ì •
NEXT_PUBLIC_COMPANY_NAME=Acompany
NEXT_PUBLIC_OFFICE_LAT=37.5665
NEXT_PUBLIC_OFFICE_LNG=126.9780
\`\`\`

---

### 8.4 ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ êµ¬í˜„ ê°€ì´ë“œ

#### 1. Kakao Developers ì„¤ì •
1. https://developers.kakao.com ì—ì„œ ì•± ìƒì„±
2. **í”Œë«í¼ ì¶”ê°€**: Web (https://walkin.com)
3. **Redirect URI ë“±ë¡**: https://walkin.com/auth/kakao/callback
4. **ë™ì˜ í•­ëª© ì„¤ì •**:
   - í•„ìˆ˜: ë‹‰ë„¤ì„, í”„ë¡œí•„ ì´ë¯¸ì§€
   - ì„ íƒ: ì¹´ì¹´ì˜¤ê³„ì •(ì´ë©”ì¼)

#### 2. Firebase Custom Token ë°©ì‹
\`\`\`typescript
// 1. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ â†’ ì¹´ì¹´ì˜¤ ì•¡ì„¸ìŠ¤ í† í° íšë“
// 2. Cloud Functionìœ¼ë¡œ ì•¡ì„¸ìŠ¤ í† í° ì „ì†¡
// 3. Cloud Functionì—ì„œ Firebase Custom Token ìƒì„±
// 4. í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Custom Tokenìœ¼ë¡œ Firebase Auth ë¡œê·¸ì¸
\`\`\`

#### 3. Firestore users ì»¬ë ‰ì…˜
\`\`\`typescript
{
  uid: string;              // Firebase UID
  email: string;            // ì¹´ì¹´ì˜¤ ì´ë©”ì¼ or "kakao_{kakao_id}@walkin.com"
  name: string;             // ì¹´ì¹´ì˜¤ ë‹‰ë„¤ì„
  kakaoId: string;          // ì¹´ì¹´ì˜¤ ê³ ìœ  ID
  profileImage: string;     // ì¹´ì¹´ì˜¤ í”„ë¡œí•„ ì´ë¯¸ì§€
  role: "employee" | "admin";
  createdAt: Timestamp;
  lastLoginAt: Timestamp;
}
\`\`\`

---

**ë¬¸ì„œ ì¢…ë£Œ**
